{
  "openapi" : "3.1.0",
  "info" : {
    "title" : "HMPPS External Movements Api",
    "contact" : {
      "name" : "HMPPS Digital Studio",
      "email" : "feedback@digital.justice.gov.uk"
    },
    "version" : "2025-11-12.316.629332e"
  },
  "servers" : [ {
    "url" : "https://external-movements-api-dev.hmpps.service.justice.gov.uk",
    "description" : "Development"
  }, {
    "url" : "https://external-movements-api-preprod.hmpps.service.justice.gov.uk",
    "description" : "Pre-Production"
  }, {
    "url" : "https://external-movements-api.hmpps.service.justice.gov.uk",
    "description" : "Production"
  }, {
    "url" : "http://localhost:8080",
    "description" : "Local"
  } ],
  "security" : [ {
    "bearer-jwt" : [ "read", "write" ]
  } ],
  "tags" : [ {
    "name" : "Sync",
    "description" : "Endpoints for sync only"
  } ],
  "paths" : {
    "/temporary-absence-occurrences/{id}" : {
      "get" : {
        "tags" : [ "tap-occurrence-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getTapOccurrence",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapOccurrence"
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "tap-occurrence-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "applyActions",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "oneOf" : [ {
                  "$ref" : "#/components/schemas/RescheduleOccurrence"
                } ]
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK"
          }
        }
      }
    },
    "/sync/temporary-absence-movements/{personIdentifier}" : {
      "put" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "syncTemporaryAbsenceMovement",
        "parameters" : [ {
          "name" : "personIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/SyncWriteTapMovement"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sync/temporary-absence-authorisations/{personIdentifier}" : {
      "put" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "syncTemporaryAbsenceAuthorisation",
        "parameters" : [ {
          "name" : "personIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/SyncWriteTapAuthorisation"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sync/temporary-absence-authorisations/{authorisationId}/occurrences" : {
      "put" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "syncTemporaryAbsenceOccurrence",
        "parameters" : [ {
          "name" : "authorisationId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/SyncWriteTapOccurrence"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncResponse"
                }
              }
            }
          }
        }
      }
    },
    "/temporary-absence-authorisations/{personIdentifier}" : {
      "post" : {
        "tags" : [ "tap-authorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "createTapAuthorisation",
        "parameters" : [ {
          "name" : "personIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CreateTapAuthorisationRequest"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "201" : {
            "description" : "Created",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ReferenceId"
                }
              }
            }
          }
        }
      }
    },
    "/temporary-absence-authorisations/{id}" : {
      "get" : {
        "tags" : [ "tap-authorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getTapAuthorisation",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapAuthorisation"
                }
              }
            }
          }
        }
      }
    },
    "/sync/temporary-absence-occurrences/{id}" : {
      "get" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "findTapOccurrenceById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncReadTapOccurrence"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "deleteTapOccurrenceById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "No Content"
          }
        }
      }
    },
    "/sync/temporary-absence-movements/{id}" : {
      "get" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "findTapMovementById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncReadTapMovement"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "deleteTapMovementById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "No Content"
          }
        }
      }
    },
    "/sync/temporary-absence-authorisations/{id}" : {
      "get" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "findTapAuthorisationById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/SyncReadTapAuthorisation"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "Sync" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__SYNC__RW",
        "operationId" : "deleteTapAuthorisationById",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string",
            "format" : "uuid"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "No Content"
          }
        }
      }
    },
    "/search/temporary-absence-occurrences" : {
      "get" : {
        "tags" : [ "search-tap-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "findTapOccurrences",
        "parameters" : [ {
          "name" : "request",
          "in" : "query",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/TapOccurrenceSearchRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapOccurrenceSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/search/temporary-absence-authorisations" : {
      "get" : {
        "tags" : [ "search-tap-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "findTapAuthorisations",
        "parameters" : [ {
          "name" : "request",
          "in" : "query",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/TapAuthorisationSearchRequest"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TapAuthorisationSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reference-data/{domain}" : {
      "get" : {
        "tags" : [ "reference-data-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getDomain",
        "parameters" : [ {
          "name" : "domain",
          "in" : "path",
          "description" : "The reference data domain required. This is case insensitive.",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "absence-reason", "absence-reason-category", "absence-sub-type", "absence-type", "accompanied-by", "tap-authorisation-status", "tap-occurrence-status", "transport" ]
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ReferenceDataResponse"
                }
              }
            }
          }
        }
      }
    },
    "/prisons/{prisonIdentifier}/external-movements/overview" : {
      "get" : {
        "tags" : [ "prison-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getPrisonerOverview",
        "parameters" : [ {
          "name" : "prisonIdentifier",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PrisonExternalMovementOverview"
                }
              }
            }
          }
        }
      }
    },
    "/absence-categorisation/{domain}" : {
      "get" : {
        "tags" : [ "absence-categorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getAbsenceCategorisationDomain",
        "parameters" : [ {
          "name" : "domain",
          "in" : "path",
          "description" : "The reference data domain required. This is case insensitive.",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "absence-reason", "absence-reason-category", "absence-sub-type", "absence-type" ]
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AbsenceCategorisations"
                }
              }
            }
          }
        }
      }
    },
    "/absence-categorisation/{domain}/{code}" : {
      "get" : {
        "tags" : [ "absence-categorisation-controller" ],
        "description" : "\n\nRequires one of the following roles:\n* ROLE_EXTERNAL_MOVEMENTS__EXTERNAL_MOVEMENTS_UI",
        "operationId" : "getAbsenceCategorisationOptions",
        "parameters" : [ {
          "name" : "domain",
          "in" : "path",
          "description" : "The reference data domain required. This is case insensitive.",
          "required" : true,
          "schema" : {
            "type" : "string",
            "enum" : [ "absence-reason", "absence-reason-category", "absence-sub-type", "absence-type" ]
          }
        }, {
          "name" : "code",
          "in" : "path",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "*/*" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AbsenceCategorisations"
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Action" : {
        "type" : "object",
        "discriminator" : {
          "propertyName" : "type"
        },
        "properties" : {
          "type" : {
            "type" : "string"
          },
          "reason" : {
            "type" : "string"
          }
        },
        "required" : [ "type" ]
      },
      "RescheduleOccurrence" : {
        "allOf" : [ {
          "$ref" : "#/components/schemas/Action"
        }, {
          "type" : "object",
          "properties" : {
            "releaseAt" : {
              "type" : "string",
              "format" : "date-time"
            },
            "returnBy" : {
              "type" : "string",
              "format" : "date-time"
            }
          }
        } ],
        "required" : [ "type" ]
      },
      "Location" : {
        "type" : "object",
        "properties" : {
          "description" : {
            "type" : "string"
          },
          "address" : {
            "type" : "string"
          },
          "postcode" : {
            "type" : "string"
          },
          "uprn" : {
            "type" : "string"
          }
        }
      },
      "SyncAtAndBy" : {
        "type" : "object",
        "properties" : {
          "at" : {
            "type" : "string",
            "format" : "date-time"
          },
          "by" : {
            "type" : "string"
          }
        },
        "required" : [ "at", "by" ]
      },
      "SyncAtAndByWithPrison" : {
        "type" : "object",
        "properties" : {
          "at" : {
            "type" : "string",
            "format" : "date-time"
          },
          "by" : {
            "type" : "string"
          },
          "prisonCode" : {
            "type" : "string"
          }
        },
        "required" : [ "at", "by", "prisonCode" ]
      },
      "SyncWriteTapMovement" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "occurrenceId" : {
            "type" : "string",
            "format" : "uuid"
          },
          "occurredAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "direction" : {
            "type" : "string",
            "enum" : [ "IN", "OUT" ]
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "accompaniedByNotes" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndByWithPrison"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "legacyId" : {
            "type" : "string"
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "created", "direction", "legacyId", "location", "occurredAt" ]
      },
      "SyncResponse" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          }
        },
        "required" : [ "id" ]
      },
      "SyncWriteTapAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "prisonCode" : {
            "type" : "string"
          },
          "statusCode" : {
            "type" : "string"
          },
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "notes" : {
            "type" : "string"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "legacyId" : {
            "type" : "integer",
            "format" : "int64"
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "created", "fromDate", "legacyId", "prisonCode", "repeat", "statusCode", "toDate" ]
      },
      "SyncWriteTapOccurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "statusCode" : {
            "type" : "string"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "transportCode" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "legacyId" : {
            "type" : "integer",
            "format" : "int64"
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "created", "legacyId", "location", "releaseAt", "returnBy", "statusCode", "transportCode" ]
      },
      "CreateTapAuthorisationRequest" : {
        "type" : "object",
        "properties" : {
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCategoryCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "occurrences" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/CreateTapOccurrenceRequest"
            }
          },
          "statusCode" : {
            "type" : "string",
            "enum" : [ "PENDING", "APPROVED", "CANCELLED", "DENIED" ]
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "transportCode" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "contactInformation" : {
            "type" : "string"
          },
          "schedule" : {
            "$ref" : "#/components/schemas/JsonNode"
          }
        },
        "required" : [ "absenceTypeCode", "accompaniedByCode", "fromDate", "occurrences", "repeat", "statusCode", "toDate", "transportCode" ]
      },
      "CreateTapOccurrenceRequest" : {
        "type" : "object",
        "properties" : {
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCategoryCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "transportCode" : {
            "type" : "string"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "contactInformation" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "scheduleReference" : {
            "$ref" : "#/components/schemas/JsonNode"
          }
        },
        "required" : [ "location", "releaseAt", "returnBy" ]
      },
      "JsonNode" : { },
      "ReferenceId" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          }
        },
        "required" : [ "id" ]
      },
      "AtAndBy" : {
        "type" : "object",
        "properties" : {
          "at" : {
            "type" : "string",
            "format" : "date-time"
          },
          "by" : {
            "type" : "string"
          },
          "displayName" : {
            "type" : "string"
          }
        },
        "required" : [ "at", "by", "displayName" ]
      },
      "Authorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "notes" : {
            "type" : "string"
          }
        },
        "required" : [ "accompaniedBy", "id", "person", "repeat", "status" ]
      },
      "CodedDescription" : {
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string"
          },
          "description" : {
            "type" : "string"
          },
          "hintText" : {
            "type" : "string"
          }
        },
        "required" : [ "code", "description" ]
      },
      "Person" : {
        "type" : "object",
        "properties" : {
          "personIdentifier" : {
            "type" : "string"
          },
          "firstName" : {
            "type" : "string"
          },
          "lastName" : {
            "type" : "string"
          },
          "dateOfBirth" : {
            "type" : "string",
            "format" : "date"
          },
          "cellLocation" : {
            "type" : "string"
          }
        },
        "required" : [ "dateOfBirth", "firstName", "lastName", "personIdentifier" ]
      },
      "TapOccurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "authorisation" : {
            "$ref" : "#/components/schemas/Authorisation"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "transport" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "added" : {
            "$ref" : "#/components/schemas/AtAndBy"
          },
          "cancelled" : {
            "$ref" : "#/components/schemas/AtAndBy"
          },
          "contactInformation" : {
            "type" : "string"
          },
          "scheduleReference" : {
            "$ref" : "#/components/schemas/JsonNode"
          },
          "notes" : {
            "type" : "string"
          }
        },
        "required" : [ "accompaniedBy", "added", "authorisation", "id", "location", "releaseAt", "returnBy", "status", "transport" ]
      },
      "Occurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "transport" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "notes" : {
            "type" : "string"
          }
        },
        "required" : [ "accompaniedBy", "id", "location", "releaseAt", "returnBy", "status", "transport" ]
      },
      "TapAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "occurrences" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Occurrence"
            }
          },
          "submitted" : {
            "$ref" : "#/components/schemas/AtAndBy"
          },
          "approved" : {
            "$ref" : "#/components/schemas/AtAndBy"
          },
          "schedule" : {
            "$ref" : "#/components/schemas/JsonNode"
          },
          "notes" : {
            "type" : "string"
          }
        },
        "required" : [ "accompaniedBy", "fromDate", "id", "occurrences", "person", "repeat", "status", "submitted", "toDate" ]
      },
      "SyncReadTapOccurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "authorisation" : {
            "$ref" : "#/components/schemas/SyncReadTapOccurrenceAuthorisation"
          },
          "statusCode" : {
            "type" : "string"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "transportCode" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "authorisation", "created", "id", "location", "releaseAt", "returnBy", "statusCode", "transportCode" ]
      },
      "SyncReadTapOccurrenceAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "personIdentifier" : {
            "type" : "string"
          },
          "prisonCode" : {
            "type" : "string"
          }
        },
        "required" : [ "id", "personIdentifier", "prisonCode" ]
      },
      "SyncReadTapMovement" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "occurrenceId" : {
            "type" : "string",
            "format" : "uuid"
          },
          "personIdentifier" : {
            "type" : "string"
          },
          "occurredAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "direction" : {
            "type" : "string",
            "enum" : [ "IN", "OUT" ]
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "accompaniedByNotes" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndByWithPrison"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "created", "direction", "id", "location", "occurredAt", "personIdentifier" ]
      },
      "SyncReadTapAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "personIdentifier" : {
            "type" : "string"
          },
          "prisonCode" : {
            "type" : "string"
          },
          "statusCode" : {
            "type" : "string"
          },
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "notes" : {
            "type" : "string"
          },
          "occurrences" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/SyncReadTapAuthorisationOccurrence"
            }
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "created", "fromDate", "id", "occurrences", "personIdentifier", "prisonCode", "repeat", "statusCode", "toDate" ]
      },
      "SyncReadTapAuthorisationOccurrence" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "statusCode" : {
            "type" : "string"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "absenceTypeCode" : {
            "type" : "string"
          },
          "absenceSubTypeCode" : {
            "type" : "string"
          },
          "absenceReasonCode" : {
            "type" : "string"
          },
          "accompaniedByCode" : {
            "type" : "string"
          },
          "transportCode" : {
            "type" : "string"
          },
          "notes" : {
            "type" : "string"
          },
          "created" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          },
          "updated" : {
            "$ref" : "#/components/schemas/SyncAtAndBy"
          }
        },
        "required" : [ "absenceReasonCode", "accompaniedByCode", "created", "id", "location", "releaseAt", "returnBy", "statusCode", "transportCode" ]
      },
      "TapOccurrenceSearchRequest" : {
        "type" : "object",
        "properties" : {
          "prisonCode" : {
            "type" : "string",
            "minLength" : 1
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "query" : {
            "type" : "string"
          },
          "page" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "size" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "sort" : {
            "type" : "string"
          }
        },
        "required" : [ "fromDate", "page", "prisonCode", "size", "sort", "toDate" ]
      },
      "PageMetadata" : {
        "type" : "object",
        "properties" : {
          "totalElements" : {
            "type" : "integer",
            "format" : "int64"
          }
        },
        "required" : [ "totalElements" ]
      },
      "TapOccurrenceAuthorisation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "repeat" : {
            "type" : "boolean"
          }
        },
        "required" : [ "id", "person", "repeat", "status" ]
      },
      "TapOccurrenceResult" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "authorisation" : {
            "$ref" : "#/components/schemas/TapOccurrenceAuthorisation"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "releaseAt" : {
            "type" : "string",
            "format" : "date-time"
          },
          "returnBy" : {
            "type" : "string",
            "format" : "date-time"
          },
          "accompaniedBy" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "transport" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "location" : {
            "$ref" : "#/components/schemas/Location"
          },
          "isCancelled" : {
            "type" : "boolean"
          }
        },
        "required" : [ "accompaniedBy", "authorisation", "id", "isCancelled", "location", "releaseAt", "returnBy", "status", "transport" ]
      },
      "TapOccurrenceSearchResponse" : {
        "type" : "object",
        "properties" : {
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TapOccurrenceResult"
            }
          },
          "metadata" : {
            "$ref" : "#/components/schemas/PageMetadata"
          }
        },
        "required" : [ "content", "metadata" ]
      },
      "TapAuthorisationSearchRequest" : {
        "type" : "object",
        "properties" : {
          "prisonCode" : {
            "type" : "string",
            "minLength" : 1
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "status" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "enum" : [ "PENDING", "APPROVED", "CANCELLED", "DENIED" ]
            },
            "uniqueItems" : true
          },
          "query" : {
            "type" : "string"
          },
          "page" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "size" : {
            "type" : "integer",
            "format" : "int32",
            "minimum" : 1
          },
          "sort" : {
            "type" : "string"
          }
        },
        "required" : [ "fromDate", "page", "prisonCode", "size", "sort", "status", "toDate" ]
      },
      "TapAuthorisationResult" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "string",
            "format" : "uuid"
          },
          "person" : {
            "$ref" : "#/components/schemas/Person"
          },
          "status" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceSubType" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReasonCategory" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "absenceReason" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "repeat" : {
            "type" : "boolean"
          },
          "fromDate" : {
            "type" : "string",
            "format" : "date"
          },
          "toDate" : {
            "type" : "string",
            "format" : "date"
          },
          "locations" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Location"
            }
          },
          "occurrenceCount" : {
            "type" : "integer",
            "format" : "int32"
          },
          "submittedAt" : {
            "type" : "string",
            "format" : "date-time"
          }
        },
        "required" : [ "fromDate", "id", "locations", "occurrenceCount", "person", "repeat", "status", "submittedAt", "toDate" ]
      },
      "TapAuthorisationSearchResponse" : {
        "type" : "object",
        "properties" : {
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TapAuthorisationResult"
            }
          },
          "metadata" : {
            "$ref" : "#/components/schemas/PageMetadata"
          }
        },
        "required" : [ "content", "metadata" ]
      },
      "ReferenceDataResponse" : {
        "type" : "object",
        "properties" : {
          "domain" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "items" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/CodedDescription"
            }
          }
        },
        "required" : [ "domain", "items" ]
      },
      "Configuration" : {
        "type" : "object",
        "properties" : {
          "tapEnabled" : {
            "type" : "boolean"
          },
          "courtMovementsEnabled" : {
            "type" : "boolean"
          },
          "transfersEnabled" : {
            "type" : "boolean"
          },
          "releasesEnabled" : {
            "type" : "boolean"
          }
        },
        "required" : [ "courtMovementsEnabled", "releasesEnabled", "tapEnabled", "transfersEnabled" ]
      },
      "PrisonExternalMovementOverview" : {
        "type" : "object",
        "properties" : {
          "configuration" : {
            "$ref" : "#/components/schemas/Configuration"
          },
          "tapOverview" : {
            "$ref" : "#/components/schemas/TapOverview"
          }
        },
        "required" : [ "configuration", "tapOverview" ]
      },
      "TapOverview" : {
        "type" : "object",
        "properties" : {
          "leavingToday" : {
            "type" : "integer",
            "format" : "int32"
          },
          "returningToday" : {
            "type" : "integer",
            "format" : "int32"
          },
          "leavingNextSevenDays" : {
            "type" : "integer",
            "format" : "int32"
          },
          "approvalsRequired" : {
            "type" : "integer",
            "format" : "int32"
          }
        },
        "required" : [ "approvalsRequired", "leavingNextSevenDays", "leavingToday", "returningToday" ]
      },
      "AbsenceCategorisation" : {
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string"
          },
          "description" : {
            "type" : "string"
          },
          "hintText" : {
            "type" : "string"
          },
          "nextDomain" : {
            "type" : "string",
            "enum" : [ "ABSENCE_TYPE", "ABSENCE_SUB_TYPE", "ABSENCE_REASON_CATEGORY", "ABSENCE_REASON", "ACCOMPANIED_BY", "TRANSPORT", "TAP_AUTHORISATION_STATUS", "TAP_OCCURRENCE_STATUS" ]
          }
        },
        "required" : [ "code", "description" ]
      },
      "AbsenceCategorisations" : {
        "type" : "object",
        "properties" : {
          "domain" : {
            "$ref" : "#/components/schemas/CodedDescription"
          },
          "items" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/AbsenceCategorisation"
            }
          }
        },
        "required" : [ "domain", "items" ]
      }
    },
    "securitySchemes" : {
      "bearer-jwt" : {
        "type" : "http",
        "name" : "Authorization",
        "in" : "header",
        "scheme" : "bearer",
        "bearerFormat" : "JWT"
      }
    }
  }
}