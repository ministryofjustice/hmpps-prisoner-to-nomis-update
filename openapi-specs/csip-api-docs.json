{
  "openapi": "3.0.1",
  "info": {
    "title": "Challenge, Support, and Intervention Plan API",
    "description": "API for retrieving and managing Challenge, Support, and Intervention Plan (CSIP) relating to a person.\n\n## Authentication\n\nThis API uses OAuth2 with JWTs. You will need to pass the JWT in the `Authorization` header using the `Bearer` scheme.\n\n## Authorisation\n\nThe API uses roles to control access to the endpoints. The roles required for each endpoint are documented in the endpoint descriptions.\n\n## Identifying the user\n\nThe majority of the endpoints in this API require the user to be identified via their username. This is to correctly populate the change history of CSIP records e.g. who created or updated a CSIP record and for auditing purposes. The username is required when the service is called directly by a user or when another service is acting on behalf of a user. The method to supply the username is via the `subject` claim in the JWT.\n### 4XX response codes related to username:\n\n- A 400 Bad Request response will be returned if the username cannot be found in the user management service.\n",
    "contact": {
      "name": "HMPPS Digital Studio",
      "email": "feedback@digital.justice.gov.uk"
    },
    "version": "2024-10-24.2465.cb8d21d"
  },
  "servers": [
    {
      "url": "https://csip-api-dev.hmpps.service.justice.gov.uk",
      "description": "Generated server url"
    }
  ],
  "security": [
    {
      "bearer-jwt": [
        "read",
        "write"
      ]
    }
  ],
  "tags": [
    {
      "name": "9. Sync CSIP Record Controller",
      "description": "Endpoint for sync operations"
    },
    {
      "name": "1. CSIP Record Controller",
      "description": "Endpoints for CSIP Record operations"
    },
    {
      "name": "4. Investigations Controller",
      "description": "Endpoints for Investigations And Interviews operations"
    },
    {
      "name": "6. Plans Controller",
      "description": "Endpoints for Plans And Identified Needs operations"
    },
    {
      "name": "7. Reference Data Controller",
      "description": "Endpoints for Reference Data operations"
    },
    {
      "name": "8. CSIP Admin Controller",
      "description": "Endpoints for admin features such as search and reporting"
    },
    {
      "name": "6. Reviews Controller",
      "description": "Endpoints for Reviews And Attendees operations"
    },
    {
      "name": "2. Referral Controller",
      "description": "Endpoints for Referral and Contributory Factor operations"
    },
    {
      "name": "3. Safer Custody Screening Outcome Controller",
      "description": "Endpoints for Safer Custody Screening Outcome operations"
    },
    {
      "name": "5. Decision And Actions Controller",
      "description": "Endpoints for Decision And Actions operations"
    }
  ],
  "paths": {
    "/sync/csip-records": {
      "put": {
        "tags": [
          "9. Sync CSIP Record Controller"
        ],
        "description": "\n\nRequires one of the following roles:\n* ROLE_NOMIS_CSIP",
        "operationId": "syncCsipRecord",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SyncCsipRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "CSIP record merged",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SyncResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/queue-admin/retry-dlq/{dlqName}": {
      "put": {
        "tags": [
          "hmpps-queue-resource"
        ],
        "description": "\n\nRequires one of the following roles:\n* ROLE_CSIP_ADMIN",
        "operationId": "retryDlq",
        "parameters": [
          {
            "name": "dlqName",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/RetryDlqResult"
                }
              }
            }
          }
        }
      }
    },
    "/queue-admin/retry-all-dlqs": {
      "put": {
        "tags": [
          "hmpps-queue-resource"
        ],
        "operationId": "retryAllDlqs",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RetryDlqResult"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/queue-admin/purge-queue/{queueName}": {
      "put": {
        "tags": [
          "hmpps-queue-resource"
        ],
        "description": "\n\nRequires one of the following roles:\n* ROLE_CSIP_ADMIN",
        "operationId": "purgeQueue",
        "parameters": [
          {
            "name": "queueName",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/PurgeQueueResult"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/decision-and-actions": {
      "put": {
        "tags": [
          "5. Decision And Actions Controller"
        ],
        "summary": "Add decision and actions to the referral.",
        "description": "Create or update the decision and actions. Publishes person.csip.record.updated event with affected component of DecisionAndActions\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "upsertDecision",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpsertDecisionAndActionsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Decision and actions updated for CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DecisionAndActions"
                }
              }
            }
          },
          "409": {
            "description": "The CSIP referral associated with this identifier already has a decision and actions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Decision and actions added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DecisionAndActions"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/prisoners/{prisonNumber}/csip-records": {
      "get": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Retrieve and filter all CSIP records for a prisoner.",
        "description": "Returns the CSIP records for a prisoner. Supports log code filtering.\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "getCsipRecordsByPrisonNumbers_1",
        "parameters": [
          {
            "name": "prisonNumber",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "logCode",
            "in": "query",
            "required": false,
            "schema": {
              "maxLength": 10,
              "minLength": 0,
              "type": "string"
            }
          },
          {
            "name": "createdAtStart",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "createdAtEnd",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP records found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipSummaries"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Create a CSIP record for a prisoner.",
        "description": "Create the CSIP record, referral and contributory factors. This starts the CSIP process. Publishes person.csip.record.created and person.csip.contributory-factor.created events\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createCsipRecord",
        "parameters": [
          {
            "name": "prisonNumber",
            "in": "path",
            "description": "Prison Number of the prisoner",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCsipRecordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "CSIP record created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipRecord"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/safer-custody-screening": {
      "post": {
        "tags": [
          "3. Safer Custody Screening Outcome Controller"
        ],
        "summary": "Add safer custody screening outcome to the referral.",
        "description": "Create the safer custody screening outcome. Publishes person.csip.record.updated event with saferCustodyScreeningOutcomeAffected = true\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createScreeningOutcome",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSaferCustodyScreeningOutcomeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "409": {
            "description": "Conflict. The CSIP referral already has a Safer Custody Screening Outcome created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Safer Custody Screening Outcome added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaferCustodyScreeningOutcome"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/investigation": {
      "post": {
        "tags": [
          "4. Investigations Controller"
        ],
        "summary": "Add investigation and any interviews to the referral.",
        "description": "Create the investigation and any interviews. Publishes person.csip.record.updated event with affected component Investigation and person.csip.interview.created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createInvestigation",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInvestigationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "409": {
            "description": "Conflict. The CSIP referral already has an Investigation created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Investigation and interviews added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Investigation"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "4. Investigations Controller"
        ],
        "summary": "Add or update the investigation.",
        "description": "Create or update the investigation. Publishes person.csip.record.updated event with affected component of Investigation\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateInvestigation",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateInvestigationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "409": {
            "description": "Conflict. The CSIP referral already has an Investigation created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Investigation updated and/or interviews added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Investigation"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Investigation and interviews added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Investigation"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/investigation/interviews": {
      "post": {
        "tags": [
          "4. Investigations Controller"
        ],
        "summary": "Add an interview to the investigation.",
        "description": "Add an interview to the investigation. Publishes person.csip.interview.created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createInterview",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInterviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Interview added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Interview"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/referral/contributory-factors": {
      "post": {
        "tags": [
          "2. Referral Controller"
        ],
        "summary": "Add a contributory factor to the referral.",
        "description": "Add a contributory factor to the referral. Publishes person.csip.contributory-factor.created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createContributoryFactor",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateContributoryFactorRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "New contributory factor added to CSIP referral",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContributoryFactor"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/plan": {
      "post": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Create the CSIP plan",
        "description": "Create the CSIP plan. Publishes person.csip.record.updated event with affected component of Plan and IdentifiedNeed\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createPlan",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "CSIP plan created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Plan"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Create or update the CSIP plan",
        "description": "Create or update the CSIP plan. Publishes person.csip.record.updated event with affected component of Plan\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updatePlan",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlanRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP referral associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "CSIP plan created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Plan"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP plan updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Plan"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/plan/reviews": {
      "post": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Add a review of the plan and any attendees.",
        "description": "Create a review of the plan and any attendees. Publishes prisoner-csip.review-created and prisoner-csip.attendee-created events\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createReview",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Reviews and attendees added to CSIP plan",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Review"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP plan associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}/plan/identified-needs": {
      "post": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Add an identified need to the plan.",
        "description": "Add an identified need to the plan. Publishes prisoner-csip.identified-need.created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createIdentifiedNeed",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateIdentifiedNeedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP plan associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "201": {
            "description": "Identified need added to CSIP plan",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdentifiedNeed"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/reviews/{reviewUuid}/attendees": {
      "post": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Add an attendee to a review of the plan.",
        "description": "Add an attendee to a review of the plan. Publishes prisoner-csip.attendee-created event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "createAttendee",
        "parameters": [
          {
            "name": "reviewUuid",
            "in": "path",
            "description": "Review unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttendeeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Attendee added to review",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Attendee"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The review associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/{recordUuid}": {
      "get": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Get a CSIP record by its unique identifier",
        "description": "Returns the CSIP record with the matching identifier.\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI\n* ROLE_NOMIS_CSIP",
        "operationId": "retrieveCsipRecord",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "CSIP record found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipRecord"
                }
              }
            }
          },
          "404": {
            "description": "The CSIP record associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Delete a complete CSIP record.",
        "description": "Delete the whole of a CSIP record, including its referral and plan. Publishes prisoner-csip.csip-record-deleted event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "deleteCsipRecord_1",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "204": {
            "description": "CSIP record deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unit"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP previously deleted or never existed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Unit"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Update the log code for a CSIP record and/or optionally the referral.",
        "description": "Update the log code for a CSIP record. Publishes person.csip.record.updated event with affected component of `Record`\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateCsipRecord",
        "parameters": [
          {
            "name": "recordUuid",
            "in": "path",
            "description": "CSIP record unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCsipRecordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The CSIP record associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP record updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CsipRecord"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/referral/investigation/interviews/{interviewUuid}": {
      "patch": {
        "tags": [
          "4. Investigations Controller"
        ],
        "summary": "Update an interview on the investigation.",
        "description": "Update an interview on the investigation. Publishes prisoner-csip.interview-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateInterview",
        "parameters": [
          {
            "name": "interviewUuid",
            "in": "path",
            "description": "Interview unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateInterviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The interview associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Interview updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Interview"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/referral/contributory-factors/{contributoryFactorUuid}": {
      "patch": {
        "tags": [
          "2. Referral Controller"
        ],
        "summary": "Update a contributory factor on the referral.",
        "description": "Update a contributory factor on the referral. Publishes prisoner-csip.contributory-factor-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateContributoryFactor",
        "parameters": [
          {
            "name": "contributoryFactorUuid",
            "in": "path",
            "description": "Contributory Factor unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateContributoryFactorRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "404": {
            "description": "The contributory factor associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Contributory factor updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContributoryFactor"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/reviews/{reviewUuid}": {
      "patch": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Update a review of the plan.",
        "description": "Update a review of the plan only. Cannot update attendees with this endpoint. Publishes prisoner-csip.review-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateReview",
        "parameters": [
          {
            "name": "reviewUuid",
            "in": "path",
            "description": "Review unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateReviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Review updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Review"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The review associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/reviews/attendees/{attendeeUuid}": {
      "patch": {
        "tags": [
          "6. Reviews Controller"
        ],
        "summary": "Update an attendee on a review of the plan.",
        "description": "Update an attendee on a review of the plan. Publishes prisoner-csip.attendee-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateAttendee",
        "parameters": [
          {
            "name": "attendeeUuid",
            "in": "path",
            "description": "Attendee unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAttendeeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Attendee updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Attendee"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The attendee associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/csip-records/plan/identified-needs/{identifiedNeedUuid}": {
      "patch": {
        "tags": [
          "6. Plans Controller"
        ],
        "summary": "Update an identified need on the plan.",
        "description": "Update an identified need on the plan. Publishes prisoner-csip.identified-need-updated event\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "updateIdentifiedNeed",
        "parameters": [
          {
            "name": "identifiedNeedUuid",
            "in": "path",
            "description": "Identified Need unique identifier",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateIdentifiedNeedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Identified Need updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdentifiedNeed"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "The identified need associated with this identifier was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sync/csip-records/{prisonNumber}": {
      "get": {
        "tags": [
          "9. Sync CSIP Record Controller"
        ],
        "summary": "Retrieve all CSIP records for a prisoner.",
        "description": "\n\nRequires one of the following roles:\n* ROLE_NOMIS_CSIP",
        "operationId": "getCsipRecordsByPrisonNumbers",
        "parameters": [
          {
            "name": "prisonNumber",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Successful request - returns an empty list if no csip records are found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CsipRecord"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/search/csip-records": {
      "get": {
        "tags": [
          "8. CSIP Admin Controller"
        ],
        "summary": "Search and filter all CSIP records.",
        "description": "Returns the CSIP records matching search query and filters\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "findCsipRecords",
        "parameters": [
          {
            "name": "prisonCode",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "query",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "CSIP_CLOSED",
                "CSIP_OPEN",
                "AWAITING_DECISION",
                "ACCT_SUPPORT",
                "PLAN_PENDING",
                "INVESTIGATION_PENDING",
                "NO_FURTHER_ACTION",
                "SUPPORT_OUTSIDE_CSIP",
                "REFERRAL_SUBMITTED",
                "REFERRAL_PENDING",
                "UNKNOWN"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP records found",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/CsipSearchResults"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/reference-data/{domain}": {
      "get": {
        "tags": [
          "7. Reference Data Controller"
        ],
        "summary": "Retrieve all reference data fo a domain.",
        "description": "Get all reference data for a domain e.g. area-of-work\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__CHALLENGE_SUPPORT_INTERVENTION_PLAN_UI",
        "operationId": "getReferenceData",
        "parameters": [
          {
            "name": "domain",
            "in": "path",
            "description": "Reference data domain.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "area-of-work",
                "contributory-factor-type",
                "decision-outcome-type",
                "role",
                "incident-involvement",
                "incident-location",
                "incident-type",
                "interviewee-role",
                "screening-outcome-type"
              ]
            }
          },
          {
            "name": "includeInactive",
            "in": "query",
            "description": "Include inactive reference data. Defaults to false",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "Reference data found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReferenceData"
                  }
                }
              }
            }
          },
          "404": {
            "description": "The reference data associated with this domain was not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/queue-admin/get-dlq-messages/{dlqName}": {
      "get": {
        "tags": [
          "hmpps-queue-resource"
        ],
        "description": "\n\nRequires one of the following roles:\n* ROLE_CSIP_ADMIN",
        "operationId": "getDlqMessages",
        "parameters": [
          {
            "name": "dlqName",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "maxMessages",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/GetDlqResult"
                }
              }
            }
          }
        }
      }
    },
    "/prisoners/{prisonNumber}/csip-records/current": {
      "get": {
        "tags": [
          "1. CSIP Record Controller"
        ],
        "summary": "Retrieve the current CSIP record for a prisoner.",
        "description": "Returns a summary of the current CSIP record and counts of opened csip and referrals for the prisoner\n\nRequires one of the following roles:\n* ROLE_CHALLENGE_SUPPORT_INTERVENTION_PLAN__RO",
        "operationId": "getCurrentCsipRecord",
        "parameters": [
          {
            "name": "prisonNumber",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "CSIP records found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentCsipDetail"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/sync/csip-records/{id}": {
      "delete": {
        "tags": [
          "9. Sync CSIP Record Controller"
        ],
        "description": "\n\nRequires one of the following roles:\n* ROLE_NOMIS_CSIP",
        "operationId": "deleteCsipRecord",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DefaultLegacyActioned"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "CSIP record merged"
          },
          "401": {
            "description": "Unauthorised, requires a valid Oauth2 token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden, requires an appropriate role",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "204": {
            "description": "No Content"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PersonSummaryRequest": {
        "required": [
          "firstName",
          "lastName",
          "status"
        ],
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "prisonCode": {
            "type": "string"
          },
          "cellLocation": {
            "type": "string"
          }
        }
      },
      "SyncAttendeeRequest": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "legacyId"
        ],
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "maxLength": 50,
            "minLength": 0,
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Description of attendee contribution."
          },
          "legacyId": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdByDisplayName": {
            "type": "string"
          },
          "lastModifiedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string"
          },
          "lastModifiedByDisplayName": {
            "type": "string"
          }
        },
        "description": "The attendees/contributors to the review."
      },
      "SyncContributoryFactorRequest": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "factorTypeCode",
          "legacyId"
        ],
        "type": "object",
        "properties": {
          "factorTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of contributory factor to the incident or motivation for CSIP referral."
          },
          "comment": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          },
          "legacyId": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdByDisplayName": {
            "type": "string"
          },
          "lastModifiedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string"
          },
          "lastModifiedByDisplayName": {
            "type": "string"
          }
        },
        "description": "Contributory factors to the incident that motivated the referral."
      },
      "SyncCsipRequest": {
        "required": [
          "actionedAt",
          "actionedBy",
          "actionedByDisplayName",
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "legacyId",
          "prisonNumber"
        ],
        "type": "object",
        "properties": {
          "prisonNumber": {
            "maxLength": 10,
            "minLength": 0,
            "type": "string"
          },
          "logCode": {
            "maxLength": 10,
            "minLength": 0,
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          },
          "referral": {
            "$ref": "#/components/schemas/SyncReferralRequest"
          },
          "plan": {
            "$ref": "#/components/schemas/SyncPlanRequest"
          },
          "prisonCodeWhenRecorded": {
            "type": "string"
          },
          "actionedAt": {
            "type": "string",
            "format": "date-time"
          },
          "actionedBy": {
            "type": "string"
          },
          "actionedByDisplayName": {
            "type": "string"
          },
          "activeCaseloadId": {
            "type": "string"
          },
          "legacyId": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "personSummary": {
            "$ref": "#/components/schemas/PersonSummaryRequest"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdByDisplayName": {
            "type": "string"
          },
          "lastModifiedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string"
          },
          "lastModifiedByDisplayName": {
            "type": "string"
          }
        }
      },
      "SyncDecisionAndActionsRequest": {
        "required": [
          "actions"
        ],
        "type": "object",
        "properties": {
          "conclusion": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The conclusion of the referral and reasons for the outcome decision."
          },
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The outcome decision for the referral."
          },
          "signedOffByRoleCode": {
            "maxLength": 12,
            "minLength": 0,
            "type": "string",
            "description": "The role of the person making the outcome decision."
          },
          "date": {
            "type": "string",
            "description": "The date the outcome decision was made.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the user who recorded the outcome decision."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the user who recorded the outcome decision."
          },
          "nextSteps": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The next steps that should be taken following the outcome decision."
          },
          "actionOther": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other actions that are recommended to be considered."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of recommended actions.",
            "items": {
              "type": "string",
              "description": "A list of recommended actions.",
              "enum": [
                "OPEN_CSIP_ALERT",
                "NON_ASSOCIATIONS_UPDATED",
                "OBSERVATION_BOOK",
                "UNIT_OR_CELL_MOVE",
                "CSRA_OR_RSRA_REVIEW",
                "SERVICE_REFERRAL",
                "SIM_REFERRAL"
              ]
            }
          }
        }
      },
      "SyncInterviewRequest": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "interviewDate",
          "interviewee",
          "intervieweeRoleCode",
          "legacyId"
        ],
        "type": "object",
        "properties": {
          "interviewee": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRoleCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "What role the interviewee played in the incident or referral."
          },
          "interviewText": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Information provided in interview."
          },
          "legacyId": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdByDisplayName": {
            "type": "string"
          },
          "lastModifiedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string"
          },
          "lastModifiedByDisplayName": {
            "type": "string"
          }
        },
        "description": "The interviews in relation to the investigation"
      },
      "SyncInvestigationRequest": {
        "required": [
          "interviews"
        ],
        "type": "object",
        "properties": {
          "staffInvolved": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          },
          "interviews": {
            "type": "array",
            "description": "The interviews in relation to the investigation",
            "items": {
              "$ref": "#/components/schemas/SyncInterviewRequest"
            }
          }
        }
      },
      "SyncNeedRequest": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "createdDate",
          "identifiedNeed",
          "intervention",
          "legacyId",
          "responsiblePerson",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeed": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "responsiblePerson": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The name of the person who is responsible for taking action on the intervention."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          },
          "legacyId": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdByDisplayName": {
            "type": "string"
          },
          "lastModifiedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string"
          },
          "lastModifiedByDisplayName": {
            "type": "string"
          }
        },
        "description": "The needs identified in the CSIP plan."
      },
      "SyncPlanRequest": {
        "required": [
          "identifiedNeeds",
          "reviews"
        ],
        "type": "object",
        "properties": {
          "caseManager": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "maxLength": 240,
            "minLength": 0,
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "firstCaseReviewDate": {
            "type": "string",
            "format": "date"
          },
          "identifiedNeeds": {
            "type": "array",
            "description": "The needs identified in the CSIP plan.",
            "items": {
              "$ref": "#/components/schemas/SyncNeedRequest"
            }
          },
          "reviews": {
            "type": "array",
            "description": "The reviews of the CSIP plan.",
            "items": {
              "$ref": "#/components/schemas/SyncReviewRequest"
            }
          },
          "nextCaseReviewDate": {
            "type": "string",
            "description": "The next date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          }
        }
      },
      "SyncReferralRequest": {
        "required": [
          "contributoryFactors",
          "incidentDate",
          "incidentLocationCode",
          "incidentTypeCode",
          "isSaferCustodyTeamInformed",
          "refererAreaCode",
          "referralDate",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "referralDate": {
            "type": "string",
            "format": "date"
          },
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "format": "partial-time",
            "example": "14:19:25"
          },
          "incidentTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of incident that motivated the CSIP referral."
          },
          "incidentLocationCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The location of incident that motivated the CSIP referral."
          },
          "referredBy": {
            "maxLength": 240,
            "minLength": 1,
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererAreaCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The area of work of the person reporting the incident or creating the CSIP referral."
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvementCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of involvement the person had in the incident"
          },
          "descriptionOfConcern": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "string",
            "description": "Records whether the safer custody team been informed.",
            "enum": [
              "YES",
              "NO",
              "DO_NOT_KNOW"
            ]
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          },
          "completedDate": {
            "type": "string",
            "format": "date"
          },
          "completedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string"
          },
          "completedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string"
          },
          "contributoryFactors": {
            "type": "array",
            "description": "Contributory factors to the incident that motivated the referral.",
            "items": {
              "$ref": "#/components/schemas/SyncContributoryFactorRequest"
            }
          },
          "saferCustodyScreeningOutcome": {
            "$ref": "#/components/schemas/SyncScreeningOutcomeRequest"
          },
          "investigation": {
            "$ref": "#/components/schemas/SyncInvestigationRequest"
          },
          "decisionAndActions": {
            "$ref": "#/components/schemas/SyncDecisionAndActionsRequest"
          }
        },
        "description": "The referral that results in the creation of this CSIP record."
      },
      "SyncReviewRequest": {
        "required": [
          "actions",
          "attendees",
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "legacyId",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date"
          },
          "summary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the review."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of actions following the review.",
            "items": {
              "type": "string",
              "description": "A list of actions following the review.",
              "enum": [
                "RESPONSIBLE_PEOPLE_INFORMED",
                "CSIP_UPDATED",
                "REMAIN_ON_CSIP",
                "CASE_NOTE",
                "CLOSE_CSIP"
              ]
            }
          },
          "attendees": {
            "type": "array",
            "description": "The attendees/contributors to the review.",
            "items": {
              "$ref": "#/components/schemas/SyncAttendeeRequest"
            }
          },
          "legacyId": {
            "type": "integer",
            "format": "int64"
          },
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdByDisplayName": {
            "type": "string"
          },
          "lastModifiedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string"
          },
          "lastModifiedByDisplayName": {
            "type": "string"
          }
        },
        "description": "The reviews of the CSIP plan."
      },
      "SyncScreeningOutcomeRequest": {
        "required": [
          "date",
          "outcomeTypeCode",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of outcome of the safer custody screening."
          },
          "reasonForDecision": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons for the safer custody screening outcome decision."
          },
          "date": {
            "type": "string",
            "description": "The date of the safer custody screening outcome.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the user who recorded the screening outcome."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the user who recorded the screening outcome."
          }
        }
      },
      "ErrorResponse": {
        "required": [
          "status"
        ],
        "type": "object",
        "properties": {
          "status": {
            "type": "integer",
            "format": "int32"
          },
          "errorCode": {
            "type": "string"
          },
          "userMessage": {
            "type": "string"
          },
          "developerMessage": {
            "type": "string"
          },
          "moreInfo": {
            "type": "string"
          }
        }
      },
      "ResponseMapping": {
        "required": [
          "component",
          "id",
          "uuid"
        ],
        "type": "object",
        "properties": {
          "component": {
            "type": "string",
            "enum": [
              "RECORD",
              "REFERRAL",
              "CONTRIBUTORY_FACTOR",
              "SAFER_CUSTODY_SCREENING_OUTCOME",
              "INVESTIGATION",
              "INTERVIEW",
              "DECISION_AND_ACTIONS",
              "PLAN",
              "IDENTIFIED_NEED",
              "REVIEW",
              "ATTENDEE"
            ]
          },
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "uuid": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "SyncResponse": {
        "required": [
          "mappings"
        ],
        "type": "object",
        "properties": {
          "mappings": {
            "uniqueItems": true,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ResponseMapping"
            }
          }
        }
      },
      "RetryDlqResult": {
        "required": [
          "messagesFoundCount"
        ],
        "type": "object",
        "properties": {
          "messagesFoundCount": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "PurgeQueueResult": {
        "required": [
          "messagesFoundCount"
        ],
        "type": "object",
        "properties": {
          "messagesFoundCount": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "UpsertDecisionAndActionsRequest": {
        "required": [
          "actions",
          "outcomeTypeCode",
          "signedOffByRoleCode"
        ],
        "type": "object",
        "properties": {
          "conclusion": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The conclusion of the referral and reasons for the outcome decision."
          },
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The outcome decision for the referral."
          },
          "signedOffByRoleCode": {
            "maxLength": 12,
            "minLength": 0,
            "type": "string",
            "description": "The role of the person making the outcome decision."
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the user who recorded the outcome decision."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the user who recorded the outcome decision."
          },
          "date": {
            "type": "string",
            "description": "The date the outcome decision was made.",
            "format": "date",
            "example": "2021-09-27"
          },
          "nextSteps": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The next steps that should be taken following the outcome decision."
          },
          "actionOther": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other actions that are recommended to be considered."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of recommended actions.",
            "items": {
              "type": "string",
              "description": "A list of recommended actions.",
              "enum": [
                "OPEN_CSIP_ALERT",
                "NON_ASSOCIATIONS_UPDATED",
                "OBSERVATION_BOOK",
                "UNIT_OR_CELL_MOVE",
                "CSRA_OR_RSRA_REVIEW",
                "SERVICE_REFERRAL",
                "SIM_REFERRAL"
              ]
            }
          }
        },
        "description": "The request body to create a Decision and Actions for a CSIP referral"
      },
      "DecisionAndActions": {
        "required": [
          "actions"
        ],
        "type": "object",
        "properties": {
          "conclusion": {
            "type": "string",
            "description": "The conclusion of the referral and reasons for the outcome decision."
          },
          "outcome": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "signedOffByRole": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "recordedBy": {
            "type": "string",
            "description": "The username of the user who recorded the outcome decision."
          },
          "recordedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who recorded the outcome decision."
          },
          "date": {
            "type": "string",
            "description": "The date the outcome decision was made.",
            "format": "date",
            "example": "2021-09-27"
          },
          "nextSteps": {
            "type": "string",
            "description": "The next steps that should be taken following the outcome decision."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of recommended actions.",
            "items": {
              "type": "string",
              "description": "A list of recommended actions.",
              "enum": [
                "OPEN_CSIP_ALERT",
                "NON_ASSOCIATIONS_UPDATED",
                "OBSERVATION_BOOK",
                "UNIT_OR_CELL_MOVE",
                "CSRA_OR_RSRA_REVIEW",
                "SERVICE_REFERRAL",
                "SIM_REFERRAL"
              ]
            }
          },
          "actionOther": {
            "type": "string",
            "description": "Any other actions that are recommended to be considered."
          }
        },
        "description": "The Decision and Actions for the CSIP referral"
      },
      "ReferenceData": {
        "required": [
          "code"
        ],
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "The short code of a reference data"
          },
          "description": {
            "type": "string",
            "description": "The description of the reference data code"
          },
          "listSequence": {
            "type": "integer",
            "description": "The sequence number of the code. Used for ordering codes correctly in lists and drop downs. ",
            "format": "int32",
            "example": 3
          },
          "deactivatedAt": {
            "type": "string",
            "description": "The date and time the code was deactivated",
            "format": "date-time"
          }
        },
        "description": "A reference data code to categorise various aspects related to a CSIP record"
      },
      "CreateContributoryFactorRequest": {
        "required": [
          "factorTypeCode"
        ],
        "type": "object",
        "properties": {
          "factorTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of contributory factor to the incident or motivation for CSIP referral."
          },
          "comment": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          }
        },
        "description": "The request body to create a contributory factor to the incident that motivated the CSIP referral"
      },
      "CreateCsipRecordRequest": {
        "required": [
          "referral"
        ],
        "type": "object",
        "properties": {
          "logCode": {
            "maxLength": 10,
            "minLength": 0,
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          },
          "referral": {
            "$ref": "#/components/schemas/CreateReferralRequest"
          }
        },
        "description": "The request body for creating a new CSIP Record for a person"
      },
      "CreateReferralRequest": {
        "required": [
          "contributoryFactors",
          "incidentDate",
          "incidentLocationCode",
          "incidentTypeCode",
          "isSaferCustodyTeamInformed",
          "refererAreaCode",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "format": "partial-time",
            "example": "14:19:25"
          },
          "incidentTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of incident that motivated the CSIP referral."
          },
          "incidentLocationCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The location of incident that motivated the CSIP referral."
          },
          "referredBy": {
            "maxLength": 240,
            "minLength": 1,
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererAreaCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The area of work of the person reporting the incident or creating the CSIP referral."
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvementCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of involvement the person had in the incident"
          },
          "descriptionOfConcern": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "string",
            "description": "Records whether the safer custody team been informed.",
            "enum": [
              "YES",
              "NO",
              "DO_NOT_KNOW"
            ]
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          },
          "contributoryFactors": {
            "type": "array",
            "description": "Contributory factors to the incident that motivated the referral.",
            "items": {
              "$ref": "#/components/schemas/CreateContributoryFactorRequest"
            }
          }
        },
        "description": "The request body for creating a CSIP referral"
      },
      "Attendee": {
        "required": [
          "attendeeUuid",
          "createdAt",
          "createdBy",
          "createdByDisplayName"
        ],
        "type": "object",
        "properties": {
          "attendeeUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Attendee",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "name": {
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "type": "string",
            "description": "Description of attendee contribution."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Attendee was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Attendee",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Attendee",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Attendee was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Attendee",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Attendee",
            "example": "Firstname Lastname"
          }
        },
        "description": "An Attendee or Contributor to a Review of a CSIP Plan"
      },
      "ContributoryFactor": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "factorType",
          "factorUuid"
        ],
        "type": "object",
        "properties": {
          "factorUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Contributory Factor",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "factorType": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "comment": {
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Contributory Factor was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Contributory Factor",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Contributory Factor",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Contributory Factor was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Contributory Factor",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Contributory Factor",
            "example": "Firstname Lastname"
          }
        },
        "description": "The contributory factor to the incident that motivated the CSIP referral"
      },
      "CsipRecord": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "prisonNumber",
          "recordUuid",
          "referral",
          "status"
        ],
        "type": "object",
        "properties": {
          "recordUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the CSIP Record",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "prisonNumber": {
            "type": "string",
            "description": "The prison number of the person the CSIP record is for."
          },
          "prisonCodeWhenRecorded": {
            "type": "string",
            "description": "The prison code where the person was resident at the time the CSIP record was created."
          },
          "logCode": {
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the CSIP Record was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the CSIP Record",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the CSIP Record",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the CSIP Record was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the CSIP Record",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the CSIP Record",
            "example": "Firstname Lastname"
          },
          "referral": {
            "$ref": "#/components/schemas/Referral"
          },
          "plan": {
            "$ref": "#/components/schemas/Plan"
          },
          "status": {
            "type": "string",
            "description": "The current status of the CSIP record.",
            "enum": [
              "CSIP_CLOSED",
              "CSIP_OPEN",
              "AWAITING_DECISION",
              "ACCT_SUPPORT",
              "PLAN_PENDING",
              "INVESTIGATION_PENDING",
              "NO_FURTHER_ACTION",
              "SUPPORT_OUTSIDE_CSIP",
              "REFERRAL_SUBMITTED",
              "REFERRAL_PENDING",
              "UNKNOWN"
            ]
          }
        },
        "description": "A CSIP Record associated with a person"
      },
      "IdentifiedNeed": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "createdDate",
          "identifiedNeed",
          "identifiedNeedUuid",
          "intervention",
          "responsiblePerson",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeedUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Contributory Factor",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "identifiedNeed": {
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "responsiblePerson": {
            "type": "string",
            "description": "The name of the person who is responsible for taking action on the intervention."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Identified Need was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Identified Need",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Identified Need",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Identified Need was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Identified Need",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Identified Need",
            "example": "Firstname Lastname"
          }
        },
        "description": "A need identified in the CSIP Plan"
      },
      "Interview": {
        "required": [
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "interviewDate",
          "interviewUuid",
          "interviewee",
          "intervieweeRole"
        ],
        "type": "object",
        "properties": {
          "interviewUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Interview",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "interviewee": {
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRole": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "interviewText": {
            "type": "string",
            "description": "Information provided in interview."
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Interview was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Interview",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Interview",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Interview was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Interview",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Interview",
            "example": "Firstname Lastname"
          }
        },
        "description": "An interview in relation to the investigation on the incident that motivated the CSIP referral"
      },
      "Investigation": {
        "required": [
          "interviews"
        ],
        "type": "object",
        "properties": {
          "staffInvolved": {
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          },
          "interviews": {
            "type": "array",
            "description": "The interviews in relation to the Investigation",
            "items": {
              "$ref": "#/components/schemas/Interview"
            }
          }
        },
        "description": "The investigation on the incident that motivated the CSIP referral"
      },
      "Plan": {
        "required": [
          "identifiedNeeds",
          "reviews"
        ],
        "type": "object",
        "properties": {
          "caseManager": {
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "firstCaseReviewDate": {
            "type": "string",
            "description": "The first date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "nextCaseReviewDate": {
            "type": "string",
            "description": "The next date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "identifiedNeeds": {
            "type": "array",
            "description": "The needs identified in the CSIP plan.",
            "items": {
              "$ref": "#/components/schemas/IdentifiedNeed"
            }
          },
          "reviews": {
            "type": "array",
            "description": "Regular reviews of the CSIP Plan",
            "items": {
              "$ref": "#/components/schemas/Review"
            }
          }
        },
        "description": "The CSIP Plan of a CSIP record"
      },
      "Referral": {
        "required": [
          "contributoryFactors",
          "incidentDate",
          "incidentLocation",
          "incidentType",
          "isSaferCustodyTeamInformed",
          "refererArea",
          "referralDate",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "referralDate": {
            "type": "string",
            "description": "The date the referral was made",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "format": "partial-time",
            "example": "14:19:25"
          },
          "incidentType": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "incidentLocation": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "referredBy": {
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererArea": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvement": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "descriptionOfConcern": {
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "string",
            "description": "Records whether the safer custody team been informed.",
            "enum": [
              "YES",
              "NO",
              "DO_NOT_KNOW"
            ]
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          },
          "referralCompletedDate": {
            "type": "string",
            "description": "The date the referral was completed.",
            "format": "date"
          },
          "referralCompletedBy": {
            "type": "string",
            "description": "The username of the person completing the referral"
          },
          "referralCompletedByDisplayName": {
            "type": "string",
            "description": "The name of the person completing the referral"
          },
          "contributoryFactors": {
            "type": "array",
            "description": "Contributory factors to the incident that motivated the referral.",
            "items": {
              "$ref": "#/components/schemas/ContributoryFactor"
            }
          },
          "investigation": {
            "$ref": "#/components/schemas/Investigation"
          },
          "saferCustodyScreeningOutcome": {
            "$ref": "#/components/schemas/SaferCustodyScreeningOutcome"
          },
          "decisionAndActions": {
            "$ref": "#/components/schemas/DecisionAndActions"
          }
        },
        "description": "The referral of a CSIP record"
      },
      "Review": {
        "required": [
          "actions",
          "attendees",
          "createdAt",
          "createdBy",
          "createdByDisplayName",
          "recordedBy",
          "recordedByDisplayName",
          "reviewSequence",
          "reviewUuid"
        ],
        "type": "object",
        "properties": {
          "reviewUuid": {
            "type": "string",
            "description": "The unique identifier assigned to the Review",
            "format": "uuid",
            "example": "8cdadcf3-b003-4116-9956-c99bd8df6a00"
          },
          "reviewSequence": {
            "type": "integer",
            "description": "The sequence number of the Review. Used for ordering reviews correctly in lists and/or drop downs.",
            "format": "int32",
            "example": 3
          },
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date"
          },
          "summary": {
            "type": "string",
            "description": "Additional information about the review."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of actions following the review.",
            "items": {
              "type": "string",
              "description": "A list of actions following the review.",
              "enum": [
                "RESPONSIBLE_PEOPLE_INFORMED",
                "CSIP_UPDATED",
                "REMAIN_ON_CSIP",
                "CASE_NOTE",
                "CLOSE_CSIP"
              ]
            }
          },
          "createdAt": {
            "type": "string",
            "description": "The date and time the Review was created",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string",
            "description": "The username of the user who created the Review",
            "example": "USER1234"
          },
          "createdByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who created the Review",
            "example": "Firstname Lastname"
          },
          "lastModifiedAt": {
            "type": "string",
            "description": "The date and time the Review was last modified",
            "format": "date-time"
          },
          "lastModifiedBy": {
            "type": "string",
            "description": "The username of the user who last modified the Review",
            "example": "USER1234"
          },
          "lastModifiedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who last modified the Review",
            "example": "Firstname Lastname"
          },
          "attendees": {
            "type": "array",
            "description": "The attendees/contributors to the review.",
            "items": {
              "$ref": "#/components/schemas/Attendee"
            }
          }
        },
        "description": "A regular review of a CSIP Plan"
      },
      "SaferCustodyScreeningOutcome": {
        "required": [
          "date",
          "outcome",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "outcome": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "recordedBy": {
            "type": "string",
            "description": "The username of the user who recorded the safer custody screening outcome."
          },
          "recordedByDisplayName": {
            "type": "string",
            "description": "The displayable name of the user who recorded the safer custody screening outcome."
          },
          "date": {
            "type": "string",
            "description": "The date of the safer custody screening outcome.",
            "format": "date",
            "example": "2021-09-27"
          },
          "reasonForDecision": {
            "type": "string",
            "description": "The reasons for the safer custody screening outcome decision."
          }
        },
        "description": "The Safer Custody Screening Outcome to the CSIP referral"
      },
      "CreateSaferCustodyScreeningOutcomeRequest": {
        "required": [
          "date",
          "outcomeTypeCode",
          "reasonForDecision",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "outcomeTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of outcome of the safer custody screening."
          },
          "date": {
            "type": "string",
            "description": "The date of the safer custody screening outcome.",
            "format": "date",
            "example": "2021-09-27"
          },
          "reasonForDecision": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons for the safer custody screening outcome decision."
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the user who recorded the screening outcome."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the user who recorded the screening outcome."
          }
        },
        "description": "The request body to create the Safer Custody Screening Outcome to the CSIP referral"
      },
      "CreateInterviewRequest": {
        "required": [
          "interviewDate",
          "interviewee",
          "intervieweeRoleCode"
        ],
        "type": "object",
        "properties": {
          "interviewee": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRoleCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "What role the interviewee played in the incident or referral."
          },
          "interviewText": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Information provided in interview."
          }
        },
        "description": "The request body to create an interview"
      },
      "CreateInvestigationRequest": {
        "required": [
          "interviews"
        ],
        "type": "object",
        "properties": {
          "staffInvolved": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          },
          "interviews": {
            "type": "array",
            "description": "The interviews in relation to the investigation",
            "items": {
              "$ref": "#/components/schemas/CreateInterviewRequest"
            }
          }
        },
        "description": "The request body to create an investigation on the incident that motivated the CSIP referral."
      },
      "CreateIdentifiedNeedRequest": {
        "required": [
          "createdDate",
          "identifiedNeed",
          "intervention",
          "responsiblePerson",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeed": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "responsiblePerson": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The name of the person who is responsible for taking action on the intervention."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          }
        },
        "description": "The request body to create an Identified Need in a CSIP Plan"
      },
      "CreatePlanRequest": {
        "required": [
          "caseManager",
          "identifiedNeeds",
          "nextCaseReviewDate",
          "reasonForPlan"
        ],
        "type": "object",
        "properties": {
          "caseManager": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "maxLength": 240,
            "minLength": 0,
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "nextCaseReviewDate": {
            "type": "string",
            "description": "The next date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "identifiedNeeds": {
            "type": "array",
            "description": "The needs identified in the CSIP plan.",
            "items": {
              "$ref": "#/components/schemas/CreateIdentifiedNeedRequest"
            }
          }
        },
        "description": "The request for creating a CSIP Plan for a CSIP record"
      },
      "CreateAttendeeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "maxLength": 50,
            "minLength": 0,
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Description of attendee contribution."
          }
        },
        "description": "The request body to create a Attendee/Contributor to the review of a CSIP Plan"
      },
      "CreateReviewRequest": {
        "required": [
          "actions",
          "attendees",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date"
          },
          "summary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the review."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of actions following the review.",
            "items": {
              "type": "string",
              "description": "A list of actions following the review.",
              "enum": [
                "RESPONSIBLE_PEOPLE_INFORMED",
                "CSIP_UPDATED",
                "REMAIN_ON_CSIP",
                "CASE_NOTE",
                "CLOSE_CSIP"
              ]
            }
          },
          "attendees": {
            "type": "array",
            "description": "The attendees/contributors to the review.",
            "items": {
              "$ref": "#/components/schemas/CreateAttendeeRequest"
            }
          }
        },
        "description": "The request body to create a Review for a CSIP Plan"
      },
      "UpdateCsipRecordRequest": {
        "type": "object",
        "properties": {
          "logCode": {
            "maxLength": 10,
            "minLength": 0,
            "type": "string",
            "description": "User entered identifier for the CSIP record. Defaults to the prison code."
          },
          "referral": {
            "$ref": "#/components/schemas/UpdateReferralRequest"
          }
        },
        "description": "The request body for updating a CSIP Record"
      },
      "UpdateReferralRequest": {
        "required": [
          "incidentDate",
          "incidentLocationCode",
          "incidentTypeCode",
          "isSaferCustodyTeamInformed",
          "refererAreaCode",
          "referredBy"
        ],
        "type": "object",
        "properties": {
          "incidentDate": {
            "type": "string",
            "description": "The date the incident that motivated the CSIP referral occurred",
            "format": "date",
            "example": "2021-09-27"
          },
          "incidentTime": {
            "type": "string",
            "description": "The time the incident that motivated the CSIP referral occurred",
            "format": "partial-time",
            "example": "14:19:25"
          },
          "incidentTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of incident that motivated the CSIP referral."
          },
          "incidentLocationCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The location of incident that motivated the CSIP referral."
          },
          "referredBy": {
            "maxLength": 240,
            "minLength": 1,
            "type": "string",
            "description": "The person reporting the incident or creating the CSIP referral."
          },
          "refererAreaCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The area of work of the person reporting the incident or creating the CSIP referral."
          },
          "isProactiveReferral": {
            "type": "boolean",
            "description": "Was this referral proactive or preventative."
          },
          "isStaffAssaulted": {
            "type": "boolean",
            "description": "Were any members of staff assaulted in the incident."
          },
          "assaultedStaffName": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Name or names of assaulted members of staff if any."
          },
          "incidentInvolvementCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of involvement the person had in the incident"
          },
          "descriptionOfConcern": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why there is cause for concern."
          },
          "knownReasons": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons already known about the causes of the incident or motivation for CSIP referral."
          },
          "otherInformation": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any other information about the incident or reasons for CSIP referral."
          },
          "isSaferCustodyTeamInformed": {
            "type": "string",
            "description": "Records whether the safer custody team been informed.",
            "enum": [
              "YES",
              "NO",
              "DO_NOT_KNOW"
            ]
          },
          "isReferralComplete": {
            "type": "boolean",
            "description": "Is the referral complete."
          }
        },
        "description": "The detail for updating a CSIP referral"
      },
      "UpdateInvestigationRequest": {
        "type": "object",
        "properties": {
          "staffInvolved": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The names of the staff involved in the investigation."
          },
          "evidenceSecured": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any evidence that was secured as part of the investigation."
          },
          "occurrenceReason": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The reasons why the incident occurred."
          },
          "personsUsualBehaviour": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The normal behaviour of the person in prison."
          },
          "personsTrigger": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "What triggers the person in prison has that could have motivated the incident."
          },
          "protectiveFactors": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Any protective factors to reduce the person's risk factors and prevent triggers for instance of violence"
          }
        },
        "description": "The request body to update an investigation on the incident that motivated the CSIP referral."
      },
      "UpdatePlanRequest": {
        "type": "object",
        "properties": {
          "caseManager": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The case manager assigned to the CSIP plan."
          },
          "reasonForPlan": {
            "maxLength": 240,
            "minLength": 0,
            "type": "string",
            "description": "The reasons motivating the creation of a CSIP plan."
          },
          "nextCaseReviewDate": {
            "type": "string",
            "description": "The next date the CSIP plan should be reviewed.",
            "format": "date",
            "example": "2021-09-27"
          }
        },
        "description": "The request for updating a CSIP Plan for a CSIP record"
      },
      "UpdateInterviewRequest": {
        "required": [
          "interviewDate",
          "interviewee",
          "intervieweeRoleCode"
        ],
        "type": "object",
        "properties": {
          "interviewee": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of the person being interviewed."
          },
          "interviewDate": {
            "type": "string",
            "description": "The date the interview took place.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervieweeRoleCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "What role the interviewee played in the incident or referral."
          },
          "interviewText": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Information provided in interview."
          }
        },
        "description": "The request body to update an interview"
      },
      "UpdateContributoryFactorRequest": {
        "required": [
          "factorTypeCode"
        ],
        "type": "object",
        "properties": {
          "factorTypeCode": {
            "maxLength": 12,
            "minLength": 1,
            "type": "string",
            "description": "The type of contributory factor to the incident or motivation for CSIP referral."
          },
          "comment": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the contributory factor to the incident or motivation for CSIP referral."
          }
        },
        "description": "The request body to update a contributory factor to the incident that motivated the CSIP referral"
      },
      "UpdateReviewRequest": {
        "required": [
          "actions",
          "recordedBy",
          "recordedByDisplayName"
        ],
        "type": "object",
        "properties": {
          "reviewDate": {
            "type": "string",
            "description": "The date of the review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "recordedBy": {
            "maxLength": 64,
            "minLength": 0,
            "type": "string",
            "description": "The username of the person who recorded the review."
          },
          "recordedByDisplayName": {
            "maxLength": 255,
            "minLength": 0,
            "type": "string",
            "description": "The displayable name of the person who recorded the review."
          },
          "nextReviewDate": {
            "type": "string",
            "description": "The date of the next review.",
            "format": "date",
            "example": "2021-09-27"
          },
          "csipClosedDate": {
            "type": "string",
            "description": "The date the CSIP plan was closed following a review outcome decision to close it.",
            "format": "date"
          },
          "summary": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Additional information about the review."
          },
          "actions": {
            "uniqueItems": true,
            "type": "array",
            "description": "A list of actions following the review.",
            "items": {
              "type": "string",
              "description": "A list of actions following the review.",
              "enum": [
                "RESPONSIBLE_PEOPLE_INFORMED",
                "CSIP_UPDATED",
                "REMAIN_ON_CSIP",
                "CASE_NOTE",
                "CLOSE_CSIP"
              ]
            }
          }
        },
        "description": "The request body to update a Review for a CSIP Plan"
      },
      "UpdateAttendeeRequest": {
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "Name of review attendee/contributor."
          },
          "role": {
            "maxLength": 50,
            "minLength": 0,
            "type": "string",
            "description": "Role of review attendee/contributor."
          },
          "isAttended": {
            "type": "boolean",
            "description": "If the person attended the review."
          },
          "contribution": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "Description of attendee contribution."
          }
        },
        "description": "The request body to update a Attendee/Contributor to the review of a CSIP Plan"
      },
      "UpdateIdentifiedNeedRequest": {
        "required": [
          "createdDate",
          "identifiedNeed",
          "intervention",
          "responsiblePerson",
          "targetDate"
        ],
        "type": "object",
        "properties": {
          "identifiedNeed": {
            "maxLength": 1000,
            "minLength": 0,
            "type": "string",
            "description": "Details of the need identified in the CSIP plan."
          },
          "responsiblePerson": {
            "maxLength": 100,
            "minLength": 0,
            "type": "string",
            "description": "The name of the person who is responsible for taking action on the intervention."
          },
          "createdDate": {
            "type": "string",
            "description": "The date the need was identified.",
            "format": "date",
            "example": "2021-09-27"
          },
          "targetDate": {
            "type": "string",
            "description": "The target date the need should be progressed or resolved.",
            "format": "date",
            "example": "2021-09-27"
          },
          "closedDate": {
            "type": "string",
            "description": "The date the identified need was resolved or closed.",
            "format": "date",
            "example": "2021-09-27"
          },
          "intervention": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "The planned intervention for the identified need."
          },
          "progression": {
            "maxLength": 4000,
            "minLength": 0,
            "type": "string",
            "description": "How the plan to address the identified need is progressing."
          }
        },
        "description": "The request body to update an Identified Need in a CSIP Plan"
      },
      "CsipSearchResult": {
        "required": [
          "id",
          "prisoner",
          "referralDate",
          "status"
        ],
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "prisoner": {
            "$ref": "#/components/schemas/Prisoner"
          },
          "referralDate": {
            "type": "string",
            "format": "date"
          },
          "nextReviewDate": {
            "type": "string",
            "format": "date"
          },
          "caseManager": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "CSIP_CLOSED",
              "CSIP_OPEN",
              "AWAITING_DECISION",
              "ACCT_SUPPORT",
              "PLAN_PENDING",
              "INVESTIGATION_PENDING",
              "NO_FURTHER_ACTION",
              "SUPPORT_OUTSIDE_CSIP",
              "REFERRAL_SUBMITTED",
              "REFERRAL_PENDING",
              "UNKNOWN"
            ]
          }
        }
      },
      "CsipSearchResults": {
        "required": [
          "content",
          "metadata"
        ],
        "type": "object",
        "properties": {
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CsipSearchResult"
            }
          },
          "metadata": {
            "$ref": "#/components/schemas/PageMeta"
          }
        }
      },
      "PageMeta": {
        "required": [
          "totalElements"
        ],
        "type": "object",
        "properties": {
          "totalElements": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "Prisoner": {
        "required": [
          "firstName",
          "lastName",
          "prisonNumber"
        ],
        "type": "object",
        "properties": {
          "prisonNumber": {
            "type": "string"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "location": {
            "type": "string"
          }
        }
      },
      "DlqMessage": {
        "required": [
          "body",
          "messageId"
        ],
        "type": "object",
        "properties": {
          "body": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            }
          },
          "messageId": {
            "type": "string"
          }
        }
      },
      "GetDlqResult": {
        "required": [
          "messages",
          "messagesFoundCount",
          "messagesReturnedCount"
        ],
        "type": "object",
        "properties": {
          "messagesFoundCount": {
            "type": "integer",
            "format": "int32"
          },
          "messagesReturnedCount": {
            "type": "integer",
            "format": "int32"
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DlqMessage"
            }
          }
        }
      },
      "CsipSummaries": {
        "required": [
          "content",
          "metadata"
        ],
        "type": "object",
        "properties": {
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CsipSummary"
            }
          },
          "metadata": {
            "$ref": "#/components/schemas/PageMeta"
          }
        }
      },
      "CsipSummary": {
        "required": [
          "id",
          "incidentType",
          "prisonNumber",
          "referralDate",
          "status"
        ],
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "prisonNumber": {
            "type": "string"
          },
          "logCode": {
            "type": "string"
          },
          "referralDate": {
            "type": "string",
            "format": "date"
          },
          "nextReviewDate": {
            "type": "string",
            "format": "date"
          },
          "incidentType": {
            "$ref": "#/components/schemas/ReferenceData"
          },
          "caseManager": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "CSIP_CLOSED",
              "CSIP_OPEN",
              "AWAITING_DECISION",
              "ACCT_SUPPORT",
              "PLAN_PENDING",
              "INVESTIGATION_PENDING",
              "NO_FURTHER_ACTION",
              "SUPPORT_OUTSIDE_CSIP",
              "REFERRAL_SUBMITTED",
              "REFERRAL_PENDING",
              "UNKNOWN"
            ]
          }
        }
      },
      "CurrentCsip": {
        "required": [
          "referralDate",
          "status"
        ],
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "CSIP_CLOSED",
              "CSIP_OPEN",
              "AWAITING_DECISION",
              "ACCT_SUPPORT",
              "PLAN_PENDING",
              "INVESTIGATION_PENDING",
              "NO_FURTHER_ACTION",
              "SUPPORT_OUTSIDE_CSIP",
              "REFERRAL_SUBMITTED",
              "REFERRAL_PENDING",
              "UNKNOWN"
            ]
          },
          "referralDate": {
            "type": "string",
            "format": "date"
          },
          "nextReviewDate": {
            "type": "string",
            "format": "date"
          }
        }
      },
      "CurrentCsipDetail": {
        "required": [
          "totalOpenedCsipCount",
          "totalReferralCount"
        ],
        "type": "object",
        "properties": {
          "currentCsip": {
            "$ref": "#/components/schemas/CurrentCsip"
          },
          "totalOpenedCsipCount": {
            "type": "integer",
            "format": "int32"
          },
          "totalReferralCount": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "DefaultLegacyActioned": {
        "required": [
          "actionedAt"
        ],
        "type": "object",
        "properties": {
          "actionedAt": {
            "type": "string",
            "format": "date-time"
          },
          "actionedBy": {
            "type": "string"
          },
          "actionedByDisplayName": {
            "type": "string"
          },
          "activeCaseloadId": {
            "type": "string"
          }
        }
      },
      "Unit": {
        "type": "object"
      }
    },
    "securitySchemes": {
      "bearer-jwt": {
        "type": "http",
        "name": "Authorization",
        "in": "header",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
