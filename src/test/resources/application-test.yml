server:
  shutdown: immediate

management.endpoint:
  health.cache.time-to-live: 0
  info.cache.time-to-live: 0

api.base.url:
  nomis: http://localhost:8082
  mapping: http://localhost:8084
  oauth: http://localhost:8090/auth
  visits: http://localhost:8083
  incentives: http://localhost:8085
  activities: http://localhost:8086
  appointments: http://localhost:8088
  sentence.adjustments: http://localhost:8087

hmpps.sqs:
  provider: localstack
  queues:
    visit:
      queueName: ${random.uuid}
      dlqName: ${random.uuid}
      subscribeTopicId: domainevents
      subscribeFilter: "{\"eventType\":[\"prison-visit.booked\", \"prison-visit.changed\", \"prison-visit.cancelled\"]}"
      dlqMaxReceiveCount: 1
      visibilityTimeout: 1
    incentive:
      queueName: ${random.uuid}
      dlqName: ${random.uuid}
      subscribeTopicId: domainevents
      subscribeFilter: "{\"eventType\":[\"incentives.iep-review.inserted\", \"incentives.level.changed\", \"incentives.levels.reordered\"]}"
      dlqMaxReceiveCount: 2
      visibilityTimeout: 1
    activity:
      queueName: ${random.uuid}
      dlqName: ${random.uuid}
      subscribeTopicId: domainevents
      subscribeFilter: "{\"eventType\":[\"activities.activity-schedule.created\", \"activities.activity-schedule.amended\", \"activities.scheduled-instances.amended\", \"activities.prisoner.allocated\", \"activities.prisoner.deallocated\", \"activities.prisoner.attendance-created\", \"activities.prisoner.attendance-amended\"]}"
      dlqMaxReceiveCount: 1
      visibilityTimeout: 1
    appointment:
      queueName: ${random.uuid}
      dlqName: ${random.uuid}
      subscribeTopicId: domainevents
      subscribeFilter: "{\"eventType\":[\"appointments.appointment-instance.created\", \"appointments.appointment-instance.updated\", \"appointments.appointment-instance.cancelled\", \"appointments.appointment-instance.deleted\"]}"
      dlqMaxReceiveCount: 3
      visibilityTimeout: 120
    sentencing:
      queueName: ${random.uuid}
      dlqName: ${random.uuid}
      subscribeTopicId: domainevents
      subscribeFilter: "{\"eventType\":[\"release-date-adjustments.adjustment.inserted\", \"release-date-adjustments.adjustment.updated\", \"release-date-adjustments.adjustment.deleted\"]}"
      dlqMaxReceiveCount: 3
      visibilityTimeout: 120
  topics:
    domainevents:
      arn: arn:aws:sns:eu-west-2:000000000000:${random.uuid}
